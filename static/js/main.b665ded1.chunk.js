(this["webpackJsonptdd-battleship"]=this["webpackJsonptdd-battleship"]||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(7),o=n.n(c),i=(n(12),n(13),n(2)),s=n(0);var u=function(){return Object(s.jsx)("div",{className:"header-container",children:Object(s.jsx)("h1",{className:"main-header",children:"Battleship"})})};function d(t){var e,n;return e=t.hoverFunc?function(){return t.hoverFunc(t.coord)}:function(){},n=t.placeShip?function(){t.placeShip(t.coord)}:t.attack?function(){t.attack(t.coord)}:function(){},Object(s.jsx)("div",{id:t.coord,onClick:n,onMouseEnter:e,className:"square "+(t.placed?"placed ":"")+(t.hovered?"hovered ":"")+(t.hit?"hit ":"")+(t.miss?"miss ":"")})}var f=function(){return{gameboard:function(){var t=function(){for(var t=[],e=0;e<10;e++){for(var n=[],r=0;r<10;r++)n.push("");t.push(n)}return t}(),e=[],n=[],r=function(n,r,c){var o=function(t){var e=[];return{length:t,hits:e,hit:function(n){return!e.includes(n)&&!(n>t-1)&&void e.push(n)},isSunk:function(){return e.length===t},coords:[]}}(n),i=r[0],s=r[1],u=JSON.stringify(r);if(a().some((function(t){return JSON.stringify(t)===u})))return!1;if(function(){var t=!1;return(r[0]>10||r[1]>10||c&&r[1]+n>10||!c&&r[0]+n>10)&&(t=!0),t}())return!1;if(c)for(var d=0;d<o.length;d++)o.coords.push([i,s+d]),t[i][s+d]="x";else for(var f=0;f<o.length;f++)o.coords.push([i+f,s]),t[i+f][s]="x";return e.push(o),!0},a=function(){var t=[];return e.forEach((function(e){e.coords.forEach((function(e){t.push(e)}))})),t};return{grid:t,placeShip:r,ships:e,receiveAttack:function(t){var r,a,c=JSON.stringify(t);return!n.some((function(t){return JSON.stringify(t)===c}))&&(e.forEach((function(e){e.coords.forEach((function(n,c){n[0]===t[0]&&n[1]===t[1]&&(a=c,r=e)}))})),n.push(t),!!r&&(r.hit(a),!0))},attacks:n,allSunk:function(){return 0!==e.length&&!!e.every((function(t){return t.isSunk()}))},allCoords:a,populateRandomShips:function t(){function n(){var t=[];return t.push(Math.floor(10*Math.random())),t.push(Math.floor(10*Math.random())),t}function c(){var t=6;return e.forEach((function(e){e.length<t&&(t=e.length)})),t}for(e=[],r(5,n(),Math.random()<parseFloat(.5));e.length<=4;)r(c()-1,n(),Math.random()<parseFloat(.5));var o=!1,i=a().map(JSON.stringify);new Set(i).size<a().length&&(o=!0),o&&t()}}}(),randomAttack:function(){var t=[];return t[0]=Math.floor(10*Math.random()),t[1]=Math.floor(10*Math.random()),t}}};var l=function(t){var e=Object(r.useState)([]),n=Object(i.a)(e,2),a=n[0],c=n[1],o=Object(r.useState)(f()),u=Object(i.a)(o,2),l=u[0],h=(u[1],Object(r.useState)(5)),j=Object(i.a)(h,2),b=j[0],O=j[1];function p(e){l.gameboard.placeShip(b,e,t.rotated)?(O(b-1),t.placeShip(),t.sendPlayer(l),console.log("ship true")):(console.log("ship false"),alert("You cannot place ships overlapping or out of bounds!"))}function m(e){var n=e.map((function(t){return parseInt(t)})),r=[];r.push(n);for(var a=1;a<b;a++){var o=[];t.rotated?(o.push(n[0]),o.push(n[1]+a)):(o.push(n[0]+a),o.push(n[1])),r.push(o)}c(r)}var v=[];return l.gameboard.grid.forEach((function(t,e){t.forEach((function(t,n){var r=!1,c=!1,o=l.gameboard.allCoords(),i=JSON.stringify([e,n]);o.some((function(t){return JSON.stringify(t)===i}))&&(r=!0),a.some((function(t){return JSON.stringify(t)===i}))&&(c=!0),v.push(Object(s.jsx)(d,{hoverFunc:m,hovered:c,placed:r,coord:[e,n],placeShip:p},i))}))})),Object(s.jsx)("div",{className:"square-container",children:v})},h=n(4);var j=function(t){var e=Object(r.useState)(t.humanPlayer),n=Object(i.a)(e,2),a=n[0],c=(n[1],Object(r.useState)(f())),o=Object(i.a)(c,2),u=o[0],l=o[1],j=Object(r.useState)([]),b=Object(i.a)(j,2),O=b[0],p=b[1],m=Object(r.useState)([]),v=Object(i.a)(m,2),g=v[0],S=v[1],x=Object(r.useState)([]),y=Object(i.a)(x,2),N=y[0],k=y[1],J=Object(r.useState)([]),E=Object(i.a)(J,2),M=E[0],w=E[1];function A(t){var e=!1,n=!0,r=JSON.stringify(t);if(g.some((function(t){return JSON.stringify(t)===r}))||O.some((function(t){return JSON.stringify(t)===r})))alert("You have attacked there already!");else if(u.gameboard.receiveAttack(t)?(e=!0,S((function(e){return[].concat(Object(h.a)(e),[t])}))):p((function(e){return[].concat(Object(h.a)(e),[t])})),!e){console.log("ai is attacking");for(var c=function(){var t=function(){var t=u.randomAttack();function e(){var e=!1,n=JSON.stringify(t);return(N.some((function(t){return JSON.stringify(t)===n}))||M.some((function(t){return JSON.stringify(t)===n})))&&(e=!0),e}for(;e();)t=u.randomAttack();return t}();console.log(t),a.gameboard.receiveAttack(t)?(n=!0,w((function(e){return[].concat(Object(h.a)(e),[t])}))):(n=!1,k((function(e){return[].concat(Object(h.a)(e),[t])})))};n;)c();console.log(n)}}function F(t,e){var n=[];return t.gameboard.grid.forEach((function(r,a){r.forEach((function(r,c){var o=!1,i=!1,u=!1,f=t.gameboard.allCoords(),l=JSON.stringify([a,c]);f.some((function(t){return JSON.stringify(t)===l}))&&e&&(u=!0),e?N.some((function(t){return JSON.stringify(t)===l}))&&(i=!0):O.some((function(t){return JSON.stringify(t)===l}))&&(i=!0),e?M.some((function(t){return JSON.stringify(t)===l}))&&(o=!0):g.some((function(t){return JSON.stringify(t)===l}))&&(o=!0),n.push(Object(s.jsx)(d,{hit:o,miss:i,attack:e?function(){}:A,placed:u,coord:[a,c]},l))}))})),n}return Object(r.useEffect)((function(){l((function(t){var e=Object.assign({},t);return e.gameboard.populateRandomShips(),e}))}),[]),u.gameboard.allSunk()&&setTimeout((function(){alert("You Won!"),window.location.reload()}),1e3),a.gameboard.allSunk()&&setTimeout((function(){alert("You Lost!"),window.location.reload()}),1e3),Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"game-container",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{className:"board-text",children:"Your Board"}),Object(s.jsx)("div",{className:"square-container",children:F(a,!0)})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{className:"board-text",children:"Enemy Board"}),Object(s.jsx)("div",{className:"square-container",children:F(u,!1)})]})]})})};var b=function(t){var e,n=Object(r.useState)(!1),a=Object(i.a)(n,2),c=a[0],o=a[1],u=Object(r.useState)({}),d=Object(i.a)(u,2),f=d[0],h=d[1],b=Object(r.useState)(0),O=Object(i.a)(b,2),p=O[0],m=O[1];return e=p>=5?Object(s.jsx)(j,{humanPlayer:f}):Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{className:"rotate "+(c?"green":"red"),onClick:function(){o(!c)},children:"Rotate "+(c?"\u2713":"\u2715")}),Object(s.jsx)(l,{sendPlayer:function(t){h(t)},rotated:c,placeShip:function(){m((function(t){return t+1}))}})]}),Object(s.jsx)("div",{children:e})};var O=function(t){return Object(s.jsx)("div",{className:t.gameStarted?"modal-hidden":"modal",children:Object(s.jsxs)("div",{className:"modal-content",children:[Object(s.jsx)("h1",{children:"Welcome to Battleship"}),Object(s.jsx)("p",{children:"Are you ready to do battle?"}),Object(s.jsx)("p",{children:"Step 1) Place all 5 of your ships, ranging in length from 5 down to 1"}),Object(s.jsx)("p",{children:"Step 2) The Enemy Board will appear and you need to try to shoot their ships"}),Object(s.jsx)("div",{className:"buttons",children:Object(s.jsx)("button",{onClick:function(){t.setGameFunc("ai")},children:"Start Game"})})]})})};var p=function(){var t=Object(r.useState)(""),e=Object(i.a)(t,2),n=e[0],a=e[1];return Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(O,{setGameFunc:function(t){a(t)},gameStarted:""!==n}),Object(s.jsx)(u,{}),Object(s.jsx)(b,{})]})};o.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(p,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b665ded1.chunk.js.map